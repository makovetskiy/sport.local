!function(e){"use strict";e.fn.filer=function(i){return this.each(function(t,a){var n=e(a),l=".jFiler",r=e(),o=e(),s=e(),d=[],f=e.isFunction(i)?i(n,e.fn.filer.defaults):i,p=f&&e.isPlainObject(f)?e.extend(!0,{},e.fn.filer.defaults,f):e.fn.filer.defaults,u={init:function(){n.wrap('<div class="jFiler"></div>'),u._set("props"),n.prop("jFiler").boxEl=r=n.closest(l),u._changeInput()},_bindInput:function(){p.changeInput&&o.length>0&&o.on("click",u._clickHandler),n.on({focus:function(){o.addClass("focused")},blur:function(){o.removeClass("focused")},change:u._onChange}),p.dragDrop&&(p.dragDrop.dragContainer.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}),p.dragDrop.dragContainer.on("drop",u._dragDrop.drop),p.dragDrop.dragContainer.on("dragover",u._dragDrop.dragEnter),p.dragDrop.dragContainer.on("dragleave",u._dragDrop.dragLeave)),p.uploadFile&&p.clipBoardPaste&&e(window).on("paste",u._clipboardPaste)},_unbindInput:function(i){p.changeInput&&o.length>0&&o.off("click",u._clickHandler),i&&(n.off("change",u._onChange),p.dragDrop&&(p.dragDrop.dragContainer.off("drop",u._dragDrop.drop),p.dragDrop.dragContainer.off("dragover",u._dragDrop.dragEnter),p.dragDrop.dragContainer.off("dragleave",u._dragDrop.dragLeave)),p.uploadFile&&p.clipBoardPaste&&e(window).off("paste",u._clipboardPaste))},_clickHandler:function(){if(!p.uploadFile&&p.addMore&&0!=n.val().length){u._unbindInput(!0);var i=e('<input type="file" />'),t=n.prop("attributes");e.each(t,function(){"required"!=this.name&&i.attr(this.name,this.value)}),n.after(i),d.push(i),n=i,u._bindInput(),u._set("props")}n.click()},_applyAttrSettings:function(){var e=["name","limit","maxSize","fileMaxSize","extensions","changeInput","showThumbs","appendTo","theme","addMore","excludeName","files","uploadUrl","uploadData","options"];for(var i in e){var t="data-jfiler-"+e[i];if(u._assets.hasAttr(t)){switch(e[i]){case"changeInput":case"showThumbs":case"addMore":p[e[i]]=["true","false"].indexOf(n.attr(t))>-1?"true"==n.attr(t):n.attr(t);break;case"extensions":p[e[i]]=n.attr(t).replace(/ /g,"").split(",");break;case"uploadUrl":p.uploadFile&&(p.uploadFile.url=n.attr(t));break;case"uploadData":p.uploadFile&&(p.uploadFile.data=JSON.parse(n.attr(t)));break;case"files":case"options":p[e[i]]=JSON.parse(n.attr(t));break;default:p[e[i]]=n.attr(t)}n.removeAttr(t)}}},_changeInput:function(){if(u._applyAttrSettings(),null!=p.beforeRender&&"function"==typeof p.beforeRender?p.beforeRender(r,n):null,p.theme&&r.addClass("jFiler-theme-"+p.theme),"input"!=n.get(0).tagName.toLowerCase()&&"file"!=n.get(0).type)o=n,n=e('<input type="file" name="'+p.name+'" />'),n.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"}),r.prepend(n),u._isGn=n;else if(p.changeInput){switch(typeof p.changeInput){case"boolean":o=e('<div class="jFiler-input"><div class="jFiler-input-caption"><span>'+p.captions.feedback+'</span></div><div class="jFiler-input-button">'+p.captions.button+'</div></div>"');break;case"string":case"object":o=e(p.changeInput);break;case"function":o=e(p.changeInput(r,n,p))}n.after(o),n.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"})}n.prop("jFiler").newInputEl=o,p.dragDrop&&(p.dragDrop.dragContainer=p.dragDrop.dragContainer?e(p.dragDrop.dragContainer):o),(!p.limit||p.limit&&p.limit>=2)&&(n.attr("multiple","multiple"),"[]"!=n.attr("name").slice(-2)?n.attr("name",n.attr("name")+"[]"):null),n.attr("disabled")||p.disabled?(p.disabled=!0,u._unbindInput(!0),r.addClass("jFiler-disabled")):(p.disabled=!1,u._bindInput(),r.removeClass("jFiler-disabled")),p.files&&u._append(!1,{files:p.files}),null!=p.afterRender&&"function"==typeof p.afterRender?p.afterRender(s,r,o,n):null},_clear:function(){u.files=null,n.prop("jFiler").files=null,p.uploadFile||p.addMore||u._reset(),u._set("feedback",u._itFl&&u._itFl.length>0?u._itFl.length+" "+p.captions.feedback2:p.captions.feedback),null!=p.onEmpty&&"function"==typeof p.onEmpty?p.onEmpty(r,o,n):null},_reset:function(i){if(!i){if(!p.uploadFile&&p.addMore){for(var t=0;t<d.length;t++)d[t].remove();d=[],u._unbindInput(!0),n=u._isGn?u._isGn:e(a),u._bindInput()}u._set("input","")}u._itFl=[],u._itFc=null,u._ajFc=0,u._set("props"),n.prop("jFiler").files_list=u._itFl,n.prop("jFiler").current_file=u._itFc,u._itFr=[],r.find("input[name^='jfiler-items-exclude-']:hidden").remove(),s.fadeOut("fast",function(){e(this).remove()}),n.prop("jFiler").listEl=s=e()},_set:function(e,i){switch(e){case"input":n.val(i);break;case"feedback":o.length>0&&o.find(".jFiler-input-caption span").html(i);break;case"props":n.prop("jFiler")||n.prop("jFiler",{options:p,listEl:s,boxEl:r,newInputEl:o,inputEl:n,files:u.files,files_list:u._itFl,current_file:u._itFc,append:function(e){return u._append(!1,{files:[e]})},enable:function(){p.disabled&&(p.disabled=!1,n.removeAttr("disabled"),r.removeClass("jFiler-disabled"),u._bindInput())},disable:function(){p.disabled||(p.disabled=!0,r.addClass("jFiler-disabled"),u._unbindInput(!0))},remove:function(e){return u._remove(null,{binded:!0,data:{id:e}}),!0},reset:function(){return u._reset(),u._clear(),!0},retry:function(e){return u._retryUpload(e)}})}},_filesCheck:function(){var i=0;if(p.limit&&u.files.length+u._itFl.length>p.limit)return p.dialogs.alert(u._assets.textParse(p.captions.errors.filesLimit)),!1;for(var t=0;t<u.files.length;t++){var a=u.files[t],n=a.name.split(".").pop().toLowerCase(),l={name:a.name,size:a.size,size2:u._assets.bytesToSize(a.size),type:a.type,ext:n};if(null!=p.extensions&&e.inArray(n,p.extensions)==-1&&e.inArray(l.type,p.extensions)==-1)return p.dialogs.alert(u._assets.textParse(p.captions.errors.filesType,l)),!1;if(null!=p.maxSize&&u.files[t].size>1048576*p.maxSize||null!=p.fileMaxSize&&u.files[t].size>1048576*p.fileMaxSize)return p.dialogs.alert(u._assets.textParse(p.captions.errors.filesSize,l)),!1;if(4096==a.size&&0==a.type.length)return p.dialogs.alert(u._assets.textParse(p.captions.errors.folderUpload,l)),!1;if(null!=p.onFileCheck&&"function"==typeof p.onFileCheck?p.onFileCheck(l,p,u._assets.textParse)===!1:null)return!1;if((p.uploadFile||p.addMore)&&!p.allowDuplicates){var l=u._itFl.filter(function(e,i){if(e.file.name==a.name&&e.file.size==a.size&&e.file.type==a.type&&(!a.lastModified||e.file.lastModified==a.lastModified))return!0});if(l.length>0){if(1==u.files.length)return!1;a._pendRemove=!0}}i+=u.files[t].size}return!(null!=p.maxSize&&i>=Math.round(1048576*p.maxSize)&&(p.dialogs.alert(u._assets.textParse(p.captions.errors.filesSizeAll)),1))},_thumbCreator:{create:function(i){var t=u.files[i],a=u._itFc?u._itFc.id:i,n=t.name,l=t.size,r=t.file,o=t.type?t.type.split("/",1):"".toString().toLowerCase(),d=n.indexOf(".")!=-1?n.split(".").pop().toLowerCase():"",f=p.uploadFile?'<div class="jFiler-jProgressBar">'+p.templates.progressBar+"</div>":"",c={id:a,name:n,size:l,size2:u._assets.bytesToSize(l),url:r,type:o,extension:d,icon:u._assets.getIcon(d,o),icon2:u._thumbCreator.generateIcon({type:o,extension:d}),image:'<div class="jFiler-item-thumb-image fi-loading"></div>',progressBar:f,_appended:t._appended},g="";return t.opts&&(c=e.extend({},t.opts,c)),g=e(u._thumbCreator.renderContent(c)).attr("data-jfiler-index",a),g.get(0).jfiler_id=a,u._thumbCreator.renderFile(t,g,c),t.forList?g:(u._itFc.html=g,g.hide()[p.templates.itemAppendToEnd?"appendTo":"prependTo"](s.find(p.templates._selectors.list)).show(),void(t._appended||u._onSelect(i)))},renderContent:function(e){return u._assets.textParse(e._appended?p.templates.itemAppend:p.templates.item,e)},renderFile:function(i,t,a){if(0==t.find(".jFiler-item-thumb-image").length)return!1;if(i.file&&"image"==a.type){var n='<img src="'+i.file+'" draggable="false" />',l=t.find(".jFiler-item-thumb-image.fi-loading");return e(n).error(function(){n=u._thumbCreator.generateIcon(a),t.addClass("jFiler-no-thumbnail"),l.removeClass("fi-loading").html(n)}).load(function(){l.removeClass("fi-loading").html(n)}),!0}if(window.File&&window.FileList&&window.FileReader&&"image"==a.type&&a.size<1e7){var r=new FileReader;r.onload=function(e){var i=t.find(".jFiler-item-thumb-image.fi-loading");if(p.templates.canvasImage){var n=document.createElement("canvas"),l=n.getContext("2d"),r=new Image;r.onload=function(){var e=i.height(),t=i.width(),a=r.height/e,o=r.width/t,s=a<o?a:o,d=r.height/s,f=r.width/s,p=Math.ceil(Math.log(r.width/f)/Math.log(2));if(n.height=e,n.width=t,r.width<n.width||r.height<n.height||p<=1){var u=r.width<n.width?n.width/2-r.width/2:r.width>n.width?-(r.width-n.width)/2:0,c=r.height<n.height?n.height/2-r.height/2:0;l.drawImage(r,u,c,r.width,r.height)}else{var g=document.createElement("canvas"),m=g.getContext("2d");g.width=.5*r.width,g.height=.5*r.height,m.fillStyle="#fff",m.fillRect(0,0,g.width,g.height),m.drawImage(r,0,0,g.width,g.height),m.drawImage(g,0,0,.5*g.width,.5*g.height),l.drawImage(g,f>n.width?f-n.width:0,0,.5*g.width,.5*g.height,0,0,f,d)}i.removeClass("fi-loading").html('<img src="'+n.toDataURL("image/png")+'" draggable="false" />')},r.onerror=function(){t.addClass("jFiler-no-thumbnail"),i.removeClass("fi-loading").html(u._thumbCreator.generateIcon(a))},r.src=e.target.result}else i.removeClass("fi-loading").html('<img src="'+e.target.result+'" draggable="false" />')},r.readAsDataURL(i)}else{var n=u._thumbCreator.generateIcon(a),l=t.find(".jFiler-item-thumb-image.fi-loading");t.addClass("jFiler-no-thumbnail"),l.removeClass("fi-loading").html(n)}},generateIcon:function(i){var t=new Array(3);if(i&&i.type&&i.type[0]&&i.extension)switch(i.type[0]){case"image":t[0]="f-image",t[1]='<i class="icon-jfi-file-image"></i>';break;case"video":t[0]="f-video",t[1]='<i class="icon-jfi-file-video"></i>';break;case"audio":t[0]="f-audio",t[1]='<i class="icon-jfi-file-audio"></i>';break;default:t[0]="f-file f-file-ext-"+i.extension,t[1]=i.extension.length>0?"."+i.extension:"",t[2]=1}else t[0]="f-file",t[1]=i.extension&&i.extension.length>0?"."+i.extension:"",t[2]=1;var a='<span class="jFiler-icon-file '+t[0]+'">'+t[1]+"</span>";if(1==t[2]){var n=u._assets.text2Color(i.extension);if(n){var l=e(a).appendTo("body");l.css("background-color",u._assets.text2Color(i.extension)),a=l.prop("outerHTML"),l.remove()}}return a},_box:function(i){if(null!=p.beforeShow&&"function"==typeof p.beforeShow&&!p.beforeShow(u.files,s,r,o,n))return!1;if(s.length<1){if(p.appendTo)var t=e(p.appendTo);else var t=r;t.find(".jFiler-items").remove(),s=e('<div class="jFiler-items jFiler-row"></div>'),n.prop("jFiler").listEl=s,s.append(u._assets.textParse(p.templates.box)).appendTo(t),s.on("click",p.templates._selectors.remove,function(t){t.preventDefault();var a=[i?i.remove.event:t,i?i.remove.el:e(this).closest(p.templates._selectors.item)],n=function(e){u._remove(a[0],a[1])};p.templates.removeConfirmation?p.dialogs.confirm(p.captions.removeConfirmation,n):n()})}for(var a=0;a<u.files.length;a++)u.files[a]._appended||(u.files[a]._choosed=!0),u._addToMemory(a),u._thumbCreator.create(a)}},_upload:function(i){var t=u._itFl[i],a=t.html,l=new FormData;if(l.append(n.attr("name"),t.file,!!t.file.name&&t.file.name),null!=p.uploadFile.data&&e.isPlainObject("function"==typeof p.uploadFile.data?p.uploadFile.data(t.file):p.uploadFile.data))for(var r in p.uploadFile.data)l.append(r,p.uploadFile.data[r]);u._ajax.send(a,l,t)},_ajax:{send:function(i,t,a){return a.ajax=e.ajax({url:p.uploadFile.url,data:t,type:p.uploadFile.type,enctype:p.uploadFile.enctype,xhr:function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){u._ajax.progressHandling(e,i)},!1),t},complete:function(e,i){a.ajax=!1,u._ajFc++,p.uploadFile.synchron&&a.id+1<u._itFl.length&&u._upload(a.id+1),u._ajFc>=u.files.length&&(u._ajFc=0,n.get(0).value="",null!=p.uploadFile.onComplete&&"function"==typeof p.uploadFile.onComplete?p.uploadFile.onComplete(s,r,o,n,e,i):null)},beforeSend:function(e,t){return null==p.uploadFile.beforeSend||"function"!=typeof p.uploadFile.beforeSend||p.uploadFile.beforeSend(i,s,r,o,n,a.id,e,t)},success:function(e,t,l){a.uploaded=!0,null!=p.uploadFile.success&&"function"==typeof p.uploadFile.success?p.uploadFile.success(e,i,s,r,o,n,a.id,t,l):null},error:function(e,t,l){a.uploaded=!1,null!=p.uploadFile.error&&"function"==typeof p.uploadFile.error?p.uploadFile.error(i,s,r,o,n,a.id,e,t,l):null},statusCode:p.uploadFile.statusCode,cache:!1,contentType:!1,processData:!1}),a.ajax},progressHandling:function(e,i){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total).toString();null!=p.uploadFile.onProgress&&"function"==typeof p.uploadFile.onProgress?p.uploadFile.onProgress(t,i,s,r,o,n):null,i.find(".jFiler-jProgressBar").find(p.templates._selectors.progressBar).css("width",t+"%")}}},_dragDrop:{dragEnter:function(e){clearTimeout(u._dragDrop._drt),p.dragDrop.dragContainer.addClass("dragged"),u._set("feedback",p.captions.drop),null!=p.dragDrop.dragEnter&&"function"==typeof p.dragDrop.dragEnter?p.dragDrop.dragEnter(e,o,n,r):null},dragLeave:function(e){clearTimeout(u._dragDrop._drt),u._dragDrop._drt=setTimeout(function(e){return u._dragDrop._dragLeaveCheck(e)?(p.dragDrop.dragContainer.removeClass("dragged"),u._set("feedback",p.captions.feedback),void(null!=p.dragDrop.dragLeave&&"function"==typeof p.dragDrop.dragLeave?p.dragDrop.dragLeave(e,o,n,r):null)):(u._dragDrop.dragLeave(e),!1)},100,e)},drop:function(e){clearTimeout(u._dragDrop._drt),p.dragDrop.dragContainer.removeClass("dragged"),u._set("feedback",p.captions.feedback),e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length>0&&u._onChange(e,e.originalEvent.dataTransfer.files),null!=p.dragDrop.drop&&"function"==typeof p.dragDrop.drop?p.dragDrop.drop(e.originalEvent.dataTransfer.files,e,o,n,r):null},_dragLeaveCheck:function(i){var t=e(i.currentTarget),a=0;return!(!t.is(o)&&(a=o.find(t).length,a>0))}},_clipboardPaste:function(e,i){if((i||e.originalEvent.clipboardData||e.originalEvent.clipboardData.items)&&(!i||e.originalEvent.dataTransfer||e.originalEvent.dataTransfer.items)&&!u._clPsePre){var t=i?e.originalEvent.dataTransfer.items:e.originalEvent.clipboardData.items,a=function(e,i,t){i=i||"",t=t||512;for(var a=atob(e),n=[],l=0;l<a.length;l+=t){for(var r=a.slice(l,l+t),o=new Array(r.length),s=0;s<r.length;s++)o[s]=r.charCodeAt(s);var d=new Uint8Array(o);n.push(d)}var f=new Blob(n,{type:i});return f};if(t)for(var n=0;n<t.length;n++)if(t[n].type.indexOf("image")!==-1||t[n].type.indexOf("text/uri-list")!==-1){if(i)try{window.atob(e.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1])}catch(e){return}var l=i?a(e.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1],"image/png"):t[n].getAsFile();l.name=Math.random().toString(36).substring(5),l.name+=l.type.indexOf("/")!=-1?"."+l.type.split("/")[1].toString().toLowerCase():".png",u._onChange(e,[l]),u._clPsePre=setTimeout(function(){delete u._clPsePre},1e3)}}},_onSelect:function(i){p.uploadFile&&!e.isEmptyObject(p.uploadFile)&&(!p.uploadFile.synchron||p.uploadFile.synchron&&0==e.grep(u._itFl,function(e){return e.ajax}).length)&&u._upload(u._itFc.id),u.files[i]._pendRemove&&(u._itFc.html.hide(),u._remove(null,{binded:!0,data:{id:u._itFc.id}})),null!=p.onSelect&&"function"==typeof p.onSelect?p.onSelect(u.files[i],u._itFc.html,s,r,o,n):null,i+1>=u.files.length&&(null!=p.afterShow&&"function"==typeof p.afterShow?p.afterShow(s,r,o,n):null)},_onChange:function(i,t){if(t){if(!t||0==t.length)return u._set("input",""),u._clear(),!1;u.files=t}else{if(!n.get(0).files||"undefined"==typeof n.get(0).files||0==n.get(0).files.length)return p.uploadFile||p.addMore||(u._set("input",""),u._clear()),!1;u.files=n.get(0).files}if(p.uploadFile||p.addMore||u._reset(!0),n.prop("jFiler").files=u.files,!u._filesCheck()||null!=p.beforeSelect&&"function"==typeof p.beforeSelect&&!p.beforeSelect(u.files,s,r,o,n))return u._set("input",""),u._clear(),p.addMore&&d.length>0&&(u._unbindInput(!0),d[d.length-1].remove(),d.splice(d.length-1,1),n=d.length>0?d[d.length-1]:e(a),u._bindInput()),!1;if(u._set("feedback",u.files.length+u._itFl.length+" "+p.captions.feedback2),p.showThumbs)u._thumbCreator._box();else for(var l=0;l<u.files.length;l++)u.files[l]._choosed=!0,u._addToMemory(l),u._onSelect(l)},_append:function(e,i){var t=!!i&&i.files;if(t&&!(t.length<=0)&&(u.files=t,n.prop("jFiler").files=u.files,p.showThumbs)){for(var a=0;a<u.files.length;a++)u.files[a]._appended=!0;u._thumbCreator._box()}},_getList:function(e,i){var t=!!i&&i.files;if(t&&!(t.length<=0)&&(u.files=t,n.prop("jFiler").files=u.files,p.showThumbs)){for(var a=[],l=0;l<u.files.length;l++)u.files[l].forList=!0,a.push(u._thumbCreator.create(l));i.callback&&i.callback(a,s,r,o,n)}},_retryUpload:function(i,t){var a=parseInt("object"==typeof t?t.attr("data-jfiler-index"):t),l=u._itFl.filter(function(e,i){return e.id==a});return l.length>0&&(!p.uploadFile||e.isEmptyObject(p.uploadFile)||l[0].uploaded?void 0:(u._itFc=l[0],n.prop("jFiler").current_file=u._itFc,u._upload(a),!0))},_remove:function(i,a){if(a.binded){if("undefined"!=typeof a.data.id&&(a=s.find(p.templates._selectors.item+"[data-jfiler-index='"+a.data.id+"']"),0==a.length))return!1;a.data.el&&(a=a.data.el)}var l=function(i){var a=r.find("input[name^='jfiler-items-exclude-']:hidden").first();0==a.length&&(a=e('<input type="hidden" name="jfiler-items-exclude-'+(p.excludeName?p.excludeName:("[]"!=n.attr("name").slice(-2)?n.attr("name"):n.attr("name").substring(0,n.attr("name").length-2))+"-"+t)+'">'),a.appendTo(r)),i&&e.isArray(i)&&(i=JSON.stringify(i),a.val(i))},d=function(i,t){var a=u._itFl[t],n=[];if(a.file._choosed||a.file._appended||a.uploaded){u._itFr.push(a);for(var r=u._itFl.filter(function(e){return e.file.name==a.file.name}),o=0;o<u._itFr.length;o++)p.addMore&&u._itFr[o]==a&&r.length>0&&(u._itFr[o].remove_name=r.indexOf(a)+"://"+u._itFr[o].file.name),n.push(u._itFr[o].remove_name?u._itFr[o].remove_name:u._itFr[o].file.name)}l(n),u._itFl.splice(t,1),u._itFl.length<1?(u._reset(),u._clear()):u._set("feedback",u._itFl.length+" "+p.captions.feedback2),i.fadeOut("fast",function(){e(this).remove()})},f=a.get(0).jfiler_id||a.attr("data-jfiler-index"),c=null;for(var g in u._itFl)"length"!==g&&u._itFl.hasOwnProperty(g)&&u._itFl[g].id==f&&(c=g);return!!u._itFl.hasOwnProperty(c)&&(u._itFl[c].ajax?(u._itFl[c].ajax.abort(),void d(a,c)):void(null!=p.onRemove&&"function"==typeof p.onRemove&&p.onRemove(a,u._itFl[c].file,c,s,r,o,n)===!1||d(a,c)))},_addToMemory:function(i){u._itFl.push({id:u._itFl.length,file:u.files[i],html:e(),ajax:!1,uploaded:!1}),(p.addMore||u.files[i]._appended)&&(u._itFl[u._itFl.length-1].input=n),u._itFc=u._itFl[u._itFl.length-1],n.prop("jFiler").files_list=u._itFl,n.prop("jFiler").current_file=u._itFc},_assets:{bytesToSize:function(e){if(0==e)return"0 Byte";var i=1e3,t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(i));return(e/Math.pow(i,a)).toPrecision(3)+" "+t[a]},hasAttr:function(e,i){var i=i?i:n,t=i.attr(e);return!(!t||"undefined"==typeof t)},getIcon:function(i,t){var a=["audio","image","text","video"];return e.inArray(t,a)>-1?'<i class="icon-jfi-file-'+t+" jfi-file-ext-"+i+'"></i>':'<i class="icon-jfi-file-o jfi-file-type-'+t+" jfi-file-ext-"+i+'"></i>'},textParse:function(i,t){switch(t=e.extend({},{limit:p.limit,maxSize:p.maxSize,fileMaxSize:p.fileMaxSize,extensions:p.extensions?p.extensions.join(","):null},t&&e.isPlainObject(t)?t:{},p.options),typeof i){case"string":return i.replace(/\{\{fi-(.*?)\}\}/g,function(e,i){return i=i.replace(/ /g,""),i.match(/(.*?)\|limitTo\:(\d+)/)?i.replace(/(.*?)\|limitTo\:(\d+)/,function(e,i,a){var i=t[i]?t[i]:"",n=i.substring(0,a);return n=i.length>n.length?n.substring(0,n.length-3)+"...":n}):t[i]?t[i]:""});case"function":return i(t);default:return i}},text2Color:function(e){if(!e||0==e.length)return!1;for(var i=0,t=0;i<e.length;t=e.charCodeAt(i++)+((t<<5)-t));for(var i=0,a="#";i<3;a+=("00"+(t>>2*i++&255).toString(16)).slice(-2));return a}},files:null,_itFl:[],_itFc:null,_itFr:[],_itPl:[],_ajFc:0};return n.on("filer.append",function(e,i){u._append(e,i)}).on("filer.remove",function(e,i){i.binded=!0,u._remove(e,i)}).on("filer.reset",function(e){return u._reset(),u._clear(),!0}).on("filer.generateList",function(e,i){return u._getList(e,i)}).on("filer.retry",function(e,i){return u._retryUpload(e,i)}),u.init(),this})},e.fn.filer.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,changeInput:!0,showThumbs:!1,appendTo:null,theme:"default",templates:{box:'<ul class="jFiler-items-list jFiler-items-default"></ul>',item:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title" title="{{fi-name}}">{{fi-name | limitTo:30}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status">{{fi-progressBar}}</span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',itemAppend:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title">{{fi-name | limitTo:35}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status"></span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',progressBar:'<div class="bar"></div>',itemAppendToEnd:!1,removeConfirmation:!0,canvasImage:!0,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},files:null,uploadFile:null,dragDrop:null,addMore:!1,allowDuplicates:!1,clipBoardPaste:!0,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,onFileCheck:null,afterShow:null,onRemove:null,onEmpty:null,options:null,dialogs:{alert:function(e){return alert(e)},confirm:function(e,i){confirm(e)?i():null}},captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large! Please upload file up to {{fi-fileMaxSize}} MB.",filesSizeAll:"Files you've choosed are too large! Please upload files up to {{fi-maxSize}} MB.",folderUpload:"You are not allowed to upload folders."}}}}(jQuery);